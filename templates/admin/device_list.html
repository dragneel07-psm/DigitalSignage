{% extends 'base.html' %}

{% block title %}рдбрд┐рдЬрд┐рдЯрд▓ рд╕реВрдЪрдирд╛ рдкрд╛рдЯреА рд╡реНрдпрд╡рд╕реНрдерд╛рдкрди{% endblock %}

{% block header_title %}рдбрд┐рдЬрд┐рдЯрд▓ рд╕реВрдЪрдирд╛ рдкрд╛рдЯреА{% endblock %}

{% block content %}
<div class="mb-6 flex justify-between items-center">
    <h2 class="text-lg font-medium text-gray-700">рдЬрдбрд╛рди рднрдПрдХрд╛ рдЙрдкрдХрд░рдгрд╣рд░реВ</h2>
    {% if user.role == 'admin' or user.is_superuser %}
    <a href="{% url 'device_create' %}" class="bg-nepal-blue text-white px-4 py-2 rounded shadow hover:bg-blue-800">
        + рдирдпрд╛рдБ рдЙрдкрдХрд░рдг рдЬреЛрдбреНрдиреБрд╣реЛрд╕реН
    </a>
    {% endif %}
</div>

<div class="bg-white shadow overflow-hidden rounded-lg">
    <table class="min-w-full divide-y divide-gray-200">
        <thead class="bg-gray-50">
            <tr>
                <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                    рдирд╛рдо</th>
                <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                    рд╕реНрдерд╛рди</th>
                <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                    IP рдареЗрдЧрд╛рдирд╛</th>
                <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                    рд╕реНрдерд┐рддрд┐</th>
                <th scope="col" class="px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider">
                    рдкреНрд▓реЗрдпрд░ рд▓рд┐рдВрдХ</th>
            </tr>
        </thead>
        <tbody class="bg-white divide-y divide-gray-200">
            {% for device in devices %}
            <tr>
                <td class="px-6 py-4 whitespace-nowrap">
                    <div class="text-sm font-medium text-gray-900">{{ device.name }}</div>
                </td>
                <td class="px-6 py-4 whitespace-nowrap">
                    <div class="text-sm text-gray-500">{{ device.location_description }}</div>
                </td>
                <td class="px-6 py-4 whitespace-nowrap">
                    <div class="text-sm text-gray-500">{{ device.ip_address }}</div>
                </td>
                <td class="px-6 py-4 whitespace-nowrap">
                    <span
                        class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full 
                        {% if device.is_active %}bg-green-100 text-green-800{% else %}bg-red-100 text-red-800{% endif %}">
                        {{ device.is_active|yesno:"рд╕рдХреНрд░рд┐рдп,рдирд┐рд╖реНрдХреНрд░рд┐рдп" }}
                    </span>
                </td>
                <td class="px-6 py-4 whitespace-nowrap text-right text-sm font-medium">
                    <a href="{% url 'player_display' device.id %}" target="_blank"
                        class="px-3 py-1 bg-blue-100 text-blue-700 rounded hover:bg-blue-200 transition-colors duration-150 inline-flex items-center">
                        <span class="mr-1">ЁЯУ║</span> рд╣реЗрд░реНрдиреБрд╣реЛрд╕реН (View)
                    </a>
                </td>
            </tr>
            {% empty %}
            <tr>
                <td colspan="5" class="px-6 py-4 text-center text-gray-500">
                    рдХреБрдиреИ рдЙрдкрдХрд░рдг рдлреЗрд▓рд╛ рдкрд░реЗрдиред
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% endblock %}
